<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Wealth - Coins</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo">Crypto Wealth</div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="coins.html">Coins</a>
                <a href="coin-sets.html">Coin Sets</a>
                <a href="login.html">Login</a>
                <a href="contact.html">Contact</a>
            </div>
        </nav>
    </header>
    <main>
        <section class="coins-hero">
            <h1>Explore the Crypto Market</h1>
            <p class="subtitle">Track real-time prices for top cryptocurrencies</p>
        </section>
        <section class="coins">
            <div class="coin-grid" id="coin-grid"></div>
            <a href="contact.html" class="cta">Start Trading Now</a>
        </section>
    </main>
    <footer>
        <p>Trusted by 2M+ users | FIU-Compliant | Â© 2025 Crypto Wealth</p>
        <p>Follow us: <a href="https://x.com/Kingpaul997?t=HlAPhp7qkbvw6yrc40U3oQ&s=09">X</a></p>
    </footer>
    <script>
        const coins = ['bitcoin', 'ethereum', 'solana', 'binancecoin', 'ripple', 'cardano', 'dogecoin', 'shiba-inu', 'polkadot', 'avalanche-2'];
        const priceData = {};
        const chartInstances = {};
        coins.forEach(coin => priceData[coin] = []);

        function fetchPrices() {
            fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${coins.join(',')}`)
                .then(response => response.json())
                .then(data => {
                    const grid = document.getElementById('coin-grid');
                    grid.innerHTML = '';
                    data.forEach(coin => {
                        if (priceData[coin.id].length >= 10) priceData[coin.id].shift();
                        priceData[coin.id].push({ price: coin.current_price, time: new Date().toLocaleTimeString() });

                        const div = document.createElement('div');
                        div.className = 'coin-card';
                        div.innerHTML = `
                            <div class="coin-header">
                                <h3>${coin.name} (${coin.symbol.toUpperCase()})</h3>
                            </div>
                            <p class="price">$${coin.current_price.toFixed(2)}</p>
                            <p class="change ${coin.price_change_percentage_24h >= 0 ? 'positive' : 'negative'}">
                                24h: ${coin.price_change_percentage_24h.toFixed(2)}%
                            </p>
                            <canvas id="chart-${coin.id}" height="100"></canvas>
                        `;
                        grid.appendChild(div);

                        const ctx = document.getElementById(`chart-${coin.id}`).getContext('2d');
                        const gradient = ctx.createLinearGradient(0, 0, 0, 100);
                        gradient.addColorStop(0, 'rgba(0, 204, 153, 0.4)');
                        gradient.addColorStop(1, 'rgba(0, 204, 153, 0)');

                        if (chartInstances[coin.id]) {
                            chartInstances[coin.id].data.labels = priceData[coin.id].map(d => d.time);
                            chartInstances[coin.id].data.datasets[0].data = priceData[coin.id].map(d => d.price);
                            chartInstances[coin.id].update();
                        } else {
                            chartInstances[coin.id] = new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: priceData[coin.id].map(d => d.time),
                                    datasets: [{
                                        label: '',
                                        data: priceData[coin.id].map(d => d.price),
                                        borderColor: '#00cc99',
                                        backgroundColor: gradient,
                                        borderWidth: 2,
                                        fill: true,
                                        tension: 0.4,
                                        pointRadius: 0,
                                        pointHoverRadius: 5
                                    }]
                                },
                                options: {
                                    plugins: {
                                        legend: { display: false },
                                        tooltip: {
                                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                            titleFont: { size: 12 },
                                            bodyFont: { size: 12 },
                                            callbacks: { label: (context) => `$${context.parsed.y.toFixed(2)}` }
                                        }
                                    },
                                    scales: {
                                        x: { ticks: { color: '#d0d0d0', font: { size: 10 }, maxRotation: 0 }, grid: { display: false } },
                                        y: { ticks: { color: '#d0d0d0', font: { size: 10 } }, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                                    },
                                    animation: { duration: 1000, easing: 'easeInOutQuad' }
                                }
                            });
                        }
                    });
                })
                .catch(error => {
                    console.error('Error fetching prices:', error);
                    document.getElementById('coin-grid').innerHTML = '<p class="error">Unable to load prices. Please try again later.</p>';
                });
        }

        fetchPrices();
        setInterval(fetchPrices, 30000);
    </script>
</body>
</html>
